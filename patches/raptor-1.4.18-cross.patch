--- raptor-1.4.18/configure.ac.orig	2008-10-22 17:18:15.000000000 +0200
+++ raptor-1.4.18/configure.ac	2008-10-22 17:18:03.000000000 +0200
@@ -59,6 +59,7 @@ dnl Checks for programs.
 AC_CANONICAL_HOST
 AM_SANITY_CHECK
 AM_PROG_CC_STDC
+AM_PROG_CC_C_O
 
 m4_undefine([AC_PROG_CXX])
 m4_defun([AC_PROG_CXX],[])
@@ -295,7 +296,9 @@ int main(int argc, char* argv) {
   return is_c99("1234567");
 }], AC_MSG_RESULT(no),
     AC_DEFINE(HAVE_C99_VSNPRINTF, 1, [vsnprint has C99 compatible return value])
-    AC_MSG_RESULT(yes))
+    AC_MSG_RESULT(yes),
+    AC_DEFINE(HAVE_C99_VSNPRINTF, $ac_cv_vsnprint_result_c99, [vsnprint has C99 compatible return value])
+    AC_MSG_RESULT($ac_cv_vsnprint_result_c99))
 fi
 
 need_libm=no
@@ -387,7 +390,7 @@ if test $xmlp = 1 -a $xmlt = 1 -a  $ac_c
   LIBS="$LIBS -lxmlparse -lxmltok"
   AC_TRY_RUN([#include <stdio.h>
 	     main() {XML_ParserCreate(NULL); return(0);}],
-             worked=yes, worked=no, worked=no)
+             worked=yes, worked=no, worked=$ac_cv_libxmlparse_xml_parsercreate)
   if test $worked = yes; then
     # Old expat
     have_expat_lib=1
@@ -409,7 +412,7 @@ if test $libexpat = 1 -a $ac_cv_header_e
   LIBS="$LIBS -lexpat"
   AC_TRY_RUN([#include <stdio.h>
              main() {XML_ParserCreate(NULL); return(0);}],
-             worked=yes, worked=no, worked=no)
+             worked=yes, worked=no, worked=$ac_cv_expat_xml_parsercreate)
   if test $worked = yes; then
     # New expat - expat-1.95.0 or later
     have_expat_lib=1
@@ -456,7 +459,8 @@ int main(int argc, char **argv) {
             AC_DEFINE(EXPAT_UTF8_BOM_CRASH, 1, [does expat crash when it sees an initial UTF8 BOM?])
             AC_MSG_RESULT(no)
             AC_MSG_WARN(The available expat crashes on XML UTF-8 BOM in documents)
-            AC_MSG_WARN(Fix either by using libxml or expat 1.95.2+))
+            AC_MSG_WARN(Fix either by using libxml or expat 1.95.2+),
+	    AC_MSG_RESULT($ac_cv_expat_initial_utf8_bom))
 
   else
     AC_MSG_RESULT(no)

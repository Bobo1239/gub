<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <!-- link rel="stylesheet" type="text/css" href="blog.css" !-->
    <title>GUB -- Grand Unified Builder</title>
  </head>
  <body>
<h1>GUB -- Grand Unified Builder</h1>

<h2>WHAT IS GUB</h2>

Grand Unified Builder
(GUB, <a href="http://lilypond.org/gub">http://lilypond.org/gub</a>)
is a mini source-based distribution and packaging system.  It
cross-compiles several packages with their dependencies and assembles
them into a single installation package.

<p></p>

GUB aims at correctness ie, be dependable and reproducible, while
avoiding gratituous rebuilds.  It was originally developed for turnkey
building of all LilyPond binary installers.  Currently it supports the
following target platforms.

<pre>
darwin-ppc
   tar.bz2 file for Darwin 7 (MacOS 10.3)/PowerPC

darwin-x86
   tar.bz2 file for Darwin 8 (MacOS 10.4)/x86

mingw
   mingw executable for Windows32

linux-x86
   shar archive for Linux/x86

linux-64
   shar archive for Linux/x86_64

linux-ppc
   shar archive for Linux/PowerPC

freebsd-x86
   shar archive for FreeBSD 4/x86

freebsd-64
   shar archive for FreeBSD 6/x86_64

cygwin
   .tar.bz2 packages for Cygwin/Windows32 

arm
   shar archive for Linux/ARM (largely untested)

debian
   shar archive for Debian (largely untested)
</pre>

<h2>LICENSE</h2>

GUB is distributed under the terms of the GNU General Public License,
version 2 or later.   Gub comes with NO WARRANTY.


<h2>ACQUIRING</h2>

The Git repository is at 

<pre>
  http://github.com/janneke/gub
</pre>

You can get it by doing 

<pre>
  git clone git://github.com/janneke/gub.git
</pre>

or download the latest tarball doing
<pre>
  wget http://github.com/janneke/gub/tarball/master
</pre>

GUB home page
<pre>
  http://lilypond.org/gub
</pre>

<h2>INSTALLING</h2>

<pre>
* You need 

  - about 9 GB of free space (for all platforms)

  - standard unix shell utilities: cat, cp, install, mv, rm, sed, ...

  - a standard unix development environment with GCC and G++

  - Python 2.4 or newer (2.5, 3.0 are known to work)

  - Perl

* Try

  bin/gub --help

  make help
</pre>

<h3>Examples</h3>

<pre>
  * Prepare a cross build environment for darwin-x86

      bin/gub darwin-x86::cross/gcc

  * Cross build bison for FreeBSD x86_64

      bin/gub freebsd-64::ftp://ftp.gnu.org/pub/gnu/bison/bison-2.3.tar.gz

  * Make a LilyPond installer for your platform

      bin/gub lilypond-installer

    this leaves the installer in uploads/

  * Build Inkscape for your platform

      bin/gub inkscape-installer

    this leaves the installer in uploads/

  * Cross build OpenOffice (go-oo.org) for Windows (mingw32)

      make openoffice

    this leaves the Windows installer in uploads/
</pre>

See also
<a href="lilypond">lilypond</a>,
<a href="inkscape">inkscape</a>
and <a href="oo.o">OpenOffice.org</a>.

<h2>USAGE</h2>

Run these programs with --help argument for instructions

<pre>
  bin/gpkg              - Gub Package Manager 
  bin/gub               - the Gub Universal Builder
  bin/gib               - Gub (platform dependent) Installer Builder
  bin/gub-tester        - build tester; integrates with
  			     Bazaar,CVS,Darcs,Git,SVN and gub
  bin/cygwin-packager   - roll cygwin package
</pre>


<h2>HISTORY</h2>

The story starts with a
<a href="http://www.sankey.ws/contact.html">crazy guy</a> with an itch
to <a href="http://www.sankey.ws/gnunt.html">run LilyPond on
Windows</a>.  Not long thereafter
<a href="http://lilypond.org/~janneke/software/cygwin-cross">Cygwin
cross</a>, our first cross build environment is created.

<p>
  Later, this is moved into
  a <a href="http://sourceware.org/ml/cygwin-apps/2002-07/msg00572.html">patch
  set for mknetrel</a>.  Spring 2005: In a bold move a
  <a href="http://cvs.savannah.gnu.org/viewvc/lilypond/installers/windows">set
  of patches for MinGW</a> are created to build LilyPond and all its
  [17] dependencies.
  <!--
      expat fontconfig freetype gettext ghostscript glib gmp guile
      jpeg libiconv libpng libtool lilypad lilypond mingw pango python
      regex zlib
      !-->
  Simultaniously, a cross build environment and installer for
  <a href="http://cvs.savannah.gnu.org/viewvc/lilypond/installers/macos/">MacOSX</a>
  is created.
</p>

<p>
  Creating a cross build environment is not too difficult, esp. not if
  you know how to use Google.  The problem is that they always break
  and never work on other machines.  GUB starts as an effort to unify
  the Windows and MacOS builders and to make the process somewhat
  dependable and reproducible, i.e.: even more free time for the
  developers (if there is such a thing) as the builds always succeed.
  It uses Python instead of make and bash and adds checksums for
  the package build specs.
</p>

<p>
  GUB2 adds serialization of the Python build code before execution.
  This makes the build checksumming less coarse, ie, less gratuitous
  rebuilds and more reliable.  Also, all Python code is executed
  before the build process starts, which means that there is less
  chance of silly run time errors.  Lots of packages are added in an
  effort to replace the OpenEmbedded-based build system for the Samco
  3G video phone at SES, Philips Research Eindhoven.
</p>

<p>
  In <a "http://news.opensuse.org/2008/08/07/announcing-hack-week-iii">Novell's
  Hackweek-iii</a> GUB enters into its Third Life with
  <a href="http://lilypond.org/gub">GUB3</a>, adding cross-platform
  build dependencies and patches for an OpenOffice.org MinGW cross
  build.
</p>

</div>
</body>
</html>
